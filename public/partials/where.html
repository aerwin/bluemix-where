<!-- Copyright IBM Corp. 2014 All Rights Reserved -->

<div class="row whereMainRow"> <!-- AWE TODO: smarter way to set height? -->
	<div class="col-md-12 whereMainRowInner">	
		<div class="page-header col-md-12">
  			<h1><img src="/images/bluemixGlobeColor32.png" / alt="Where? Logo"><span>Where?</span></h1>
  			<h3><small>IBM Bluemix-powered demo helping to answer the "where" questions of life.</small></h3>
		</div>

		<div class="leafletContainer col-md-8">
			<leaflet class="leaflet" markers="markers" center="mapCenter" tiles="tiles" geojson="geojson"></leaflet>
		</div>
		
		<div class="col-md-4">
			<fieldset class="scheduler-border whereAmI">
				<legend class="scheduler-border">Where Am I?</legend>

				<div class="whereAmIInner">
				
					<!-- Let's make a nice place to put any error/warning conditions. -->
					<div class="col-md-12" ng-visible="whereAmIAlerts.length">
						 <alert ng-repeat="alert in whereAmIAlerts" type="{{alert.type}}">{{alert.msg}}</alert>
		  			</div>
				
					<!-- AWE TODO: Remove inline style -->
					<div ng-show="currentCoordinates" style="margin-top:10px;">
						<h5>Geolocation</h5>
						<span>{{currentCoordinates.latitude | number : 6}}, {{currentCoordinates.longitude | number : 6}}
					</div> 
					
					<div ng-show="currentLocation.address">
						<h5>Nearest Address ({{currentLocation.address.Distance}} feet)</h5>
						<address>
							<span ng-show="currentLocation.address.AddressLine1">{{currentLocation.address.AddressLine1}}</span>
							<span ng-show="currentLocation.address.AddressLine2" style="display:block;">{{currentLocation.address.AddressLine2}}</span>
							<span ng-show="currentLocation.address.LastLine" style="display:block;">{{currentLocation.address.LastLine}}</span>
							<span ng-show="currentLocation.address.Country" style="display:block;">{{currentLocation.address.Country}}</span>
						</address>
					</div>
				</div>
				
				<!-- AWE TODO -->
				<button type="button" class="btn btn-custom btn-large center-block" 
					ng-click="handleWhereAmI()" ng-disabled="!currentCoordinates">Update Location</button>
				
				<!-- AWE TODO: Put these on the various dom elements? -->
				<span us-spinner spinner-key="whereAmI-spinner"></span>
			</fieldset>
					
		<!--  AWE TODO
		    <div class="control-group">
		        <label class="control-label input-label" for="startTime">Start :</label>
		        <div class="controls bootstrap-timepicker">
		            <input type="text" class="datetime" type="text" id="startTime" name="startTime" placeholder="Start Time" />
		            <i class="icon-time"></i>
		        </div>
		    </div>
		--> 
		
		</div>
			
		<div class="col-md-4">
			<fieldset class="scheduler-border" ng-disabled="!currentLocation.id">
				<legend class="scheduler-border">Where Can I Go?</legend>
				
				<!-- Let's make a nice place to put any error/warning conditions. -->
				<div class="col-md-12" ng-visible="whereCanIGoAlerts.length">
					 <alert ng-repeat="alert in whereCanIGoAlerts" type="{{alert.type}}">{{alert.msg}}</alert>
	  			</div>
		  			
				<!-- AWE TODO: Remove inline style -->
				<form class="form-horizontal whereCanIGoForm" role="form">
  					<div class="form-group">
						<label class="col-sm-1 control-label">Cost:</label>
						<div class="col-sm-11">
							<div class="col-sm-5"> <!-- AWE TODO -->
								<input type="number" class="form-control"
								      ng-model="boundaryCost" min="1" max="100" required="true"/>
							</div>
							
							<div class="col-sm-7"> 
				  				<select ng-model="boundaryUnits" class="form-control"> 
				  					<option value="Minutes">Minutes</option>
				  					<option value="Miles">Miles</option>
				  				</select>
				  			</div>
			  			</div>
			  		</div>
	  			
		  			<div class="control-group">
						<button type="button" class="btn btn-custom btn-large center-block" ng-click="handleWhereCanIGo()">
							Find Out!
						</button>
					</div>
				</form>
			</fieldset>
			
			<!-- AWE TODO: Put these on the various dom elements? -->
			<span us-spinner spinner-key="whereCanIGo-spinner"></span>
		</div>
	
		<h3 class="col-md-12">Where Have Others Been?</h3>
		
		<div class="table-responsive col-md-12 whereHaveOthersBeen">
			<table class="table table-striped table-bordered">
				<tr>
					<th>City</th>
					<th>State/Province</th>
					<th>Country or Region</th>
					<th>Count</th>
				</tr>
				<tr data-ng-repeat="element in locationSummary">
					<td>{{element.key[2]}}</td>
					<td>{{element.key[1]}}</td>
					<td>{{element.key[0]}}</td>
					<td>{{element.value}}</td>
				</tr>
			</table>
		</div>
		
		<!-- AWE TODO
		
		<div class="table-responsive col-md-12">
			<table class="table table-striped table-bordered">
				<tr>
					<th>Date/Time</th>
					<th>Latitude</th>
					<th>Longitude</th>
					<th>Address</th>
					<th>City, State</th>
					<th>Country</th>
				</tr>
				<tr data-ng-repeat="element in previousLocations">
					<td>{{element.time | date:'medium'}}</td>
					<td>{{element.latitude | number : 6}}</td>
					<td>{{element.longitude | number : 6}}</td>
					<td>{{element.address.AddressLine1}}</td>
					<td>{{element.address.LastLine}}</td>
					<td>{{element.address.Country}}</td>
				</tr>
			</table>
		</div>
		 -->
		
		<!-- AWE TODO: Finish this later
		<div class="footer col-md-12">
			<div class="container">
				<p class="text-muted">Client side built with: Angular, Bootstrap, Leaflet, etc.</p>
				<p class="text-muted">Server side built with: Node, Express, Passport, etc.</p>
			</div>
		</div>
		-->
	
	</div>
</div>



